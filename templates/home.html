{% extends "base.html" %}

{% block title %}RecPlus - Dashboard{% endblock %}

{% block content %}

    <!-- Contenedor de bienvenida -->
    <div class="welcome-bar">
        <h2>
            <i class="fas fa-user"></i>
            <span id="username-display"></span>
        </h2>
        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>   
        <button class="selenium-btn" onclick="window.location.href='/automatizacion'">
            <i class="fa-solid fa-robot"></i> Automatizar Loyal
        </button>         
    </div>

    <!-- Contenedor de dos columnas -->
    <div class="home-container grid-container">

         <!-- üîπ Secci√≥n para Escaneo de Productos -->
         <div id="scan-section" class="form-box">
            <h3>Escanear Producto</h3>
            <input type="text" id="codigo" placeholder="Escanear c√≥digo" oninput="analizarUDI(this.value)">
            <input type="text" id="codigo_tango" placeholder="C√≥digo Tango" disabled>
            <input type="text" id="ins-mat-prod" placeholder="INS/MAT/PROD" disabled>
            <input type="text" id="proveedor-producto" placeholder="Proveedor" disabled>
            <input type="text" id="nro_lote" placeholder="N√∫mero de Lote">
            <label for="fecha_vto">Fecha de Vencimiento</label>
            <input type="date" id="fecha_vto">            
            <input type="number" id="temperatura" placeholder="Temperatura">
            <input type="number" id="cantidad_ingresada" placeholder="Cantidad">
            <input type="text" id="nro_partida_asignada" placeholder="N√∫mero de Partida">
            <button onclick="escanearProducto()"><i class="fa-solid fa-file-arrow-up icono"></i>Registrar</button>
            <p id="producto-mensaje"></p>
        </div>
        
        <!-- üîπ Formulario para crear una recepci√≥n -->
        <div id="recepcion-section" class="form-box">
            <h3>Crear Recepci√≥n</h3>
            <select id="subproceso">
                <option value="">Seleccione un Subproceso</option>
                <option value="Recepci√≥n">Recepci√≥n</option>
            </select>
            <select id="proveedor">
                <option value="">Seleccione un Proveedor</option>
                <!-- Se llenar√° din√°micamente desde ProductoBase -->
            </select>
            
            <!-- ‚úÖ Nuevo: Lista de productos escaneados para asociar a la recepci√≥n -->
            <div class="table-container">
                <h4>Productos Escaneados</h4>
            <table id="tabla-productos-escaneados">
                <thead>
                    <tr>
                        <th>Seleccionar</th>
                        <th>C√≥digo</th>
                        <th>INS/MAT/PROD</th>
                        <th>N¬∞ Lote</th>
                        <th>Fecha Vto</th>
                        <th>Temperatura</th>
                        <th>Cantidad</th>
                        <th>Eliminar</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Aqu√≠ se insertar√°n los productos escaneados din√°micamente -->
                </tbody>
            </table>
        </div>


            <button onclick="crearRecepcion()"><i class="fas fa-plus"></i> Crear Recepci√≥n</button>
            <p id="recepcion-message"></p>
            
                <button class="btn-ver-recepciones" onclick="window.location.href='/recepciones-listado'">
                  <i class="fas fa-list"></i> Ver Recepciones
                 </button>
             
        </div>
           <!-- üîπ Bot√≥n para ver todas las recepciones -->
      

    </div>

{% endblock %}
