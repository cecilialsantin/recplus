{% extends "base.html" %}

{% block title %}Automatizaci贸n en Loyal{% endblock %}

{% block content %}

<div class="welcome-bar">
    <h2>Automatizaci贸n LOYAL</h2>
</div>
  
<!--  Panel unificado para ID + botones + simulacro + log -->
<div class="form-box">
    <h3>Ingrese el ID de la Recepci贸n</h3>
    <input type="text" id="id-recepcion" placeholder="Ejemplo: 123">
    <button onclick="cargarYMostrarRecepcion()"><i class="fa-solid fa-box-open"></i> Cargar Recepci贸n</button>
    <p id="mensaje-carga"></p>

    <!--  Botones simulaci贸n + confirmaci贸n -->
    <div class="acciones-lealtad" style="margin-top: 20px;">
        <button onclick="simularEnvioLoyal()" id="btn-simular" class="btn-procesar">
            <i class="fa-solid fa-robot"></i> Pre-Envio Loyal
        </button>
        <button onclick="confirmarEnvioLoyal()" id="btn-confirmar" class="btn-procesar" style="display:none">
            <i class="fa-solid fa-check"></i> Confirmar Env铆o
        </button>
    </div>

    <!--  Resultado de simulacro -->
    <div id="resultado-envio" class="resultado-envio" style="margin-top: 20px;"></div>

    <!--  Bit谩cora -->
    <div id="log-envios" class="bitacora-envios" style="margin-top: 30px;">
        <h4>Historial de Env铆os</h4>
        <ul id="log-lista"></ul>
    </div>
</div>

<!-- Tabla general de datos de la recepci贸n -->
<table class="tabla-detalle-recepcion" style="margin-bottom: 20px;" id="fila-datos-recepcion">
    <thead>
        <tr>
            <th>ID</th>
            <th>Fecha</th>
            <th>Subproceso</th>
            <th>C贸digo Proveedor</th>
            <th>Proveedor</th>
            <th>Link Formulario Padre</th>
    </thead>
    <tbody>
        <!-- Se llenar谩 desde JS -->
    </tbody>
</table>

    
    <!-- Tabla para mostrar los productos de la recepci贸n -->
    <div class="table-container">
        <h3>Productos</h3>
        <table id="tabla-recepcion">
            <thead>
                <tr>
                    <th>C贸digo Producto</th>
                    <th>C贸digo Tango</th>
                    <th>Ins-Mat-Prod</th>
                    <th>Codigo Proveedor</th>
                    <th>Proveedor</th>
                    <th>N掳 Lote</th>
                    <th>Fecha Vto</th>
                    <th>Temperatura</th>
                    <th>Cantidad</th>
                    <th>N掳 Partida</th>
                </tr>
            </thead>
            <tbody>
                <!-- Se llenar谩 din谩micamente con JS -->
            </tbody>
        </table>
    </div>

      <!-- Bot贸n de Volver -->
      <button class="btn-volver" onclick="window.location.href='/home'">
        <i class="fas fa-arrow-left"></i> Volver
    </button>

{% endblock %}
